<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="${base}/mrhweb/css/bootstrap/bootstrap.min.css">
    <title>添加新闻</title>

    <style>
        textarea{
            resize: none;
        }
    </style>
</head>
<body>

<div class="container-fluid paper-wrap bevel tlbr">
    <h3 class="text-center">添加一条新闻</h3>
    <div class="row">
        <div class="col-md-10 col-md-offset-1 ">
            <form id="schlForm" class="form-horizontal" method="post" action="${base}/governor/newsAd/save.json" onsubmit="return doSave(this);">
            	<div class="form-group">
                    <label for="" class="col-sm-2 control-label">新闻编号：</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="num"
                        onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"
                         placeholder="默认空，系统随机">
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2 control-label">新闻标题：</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="title" placeholder="新闻标题">
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class=" col-sm-2 control-label">发布时间：</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" name="pubTime" placeholder="" onClick="WdatePicker({el:this,dateFmt:'yyyy-MM-dd HH:mm:ss'})">
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2 control-label">类型：</label>
                    <div class="col-sm-4">
                        <select id="news_type_id" name="type"  class="form-control" >
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2 control-label">新闻图片路径：</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="imgUrl" placeholder="用于列表展示">
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class=" col-sm-2 control-label">新闻作者：</label>
                    <div class=" col-sm-4">
                        <input type="text"  class="form-control" name="author" value=""  />
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2 control-label">新闻url：</label>
                    <div class="col-sm-10">
                        <input type="text" name="url" class="form-control" placeholder="静态网页的路径">
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2 control-label">来源网站：</label>
                    <div class="col-sm-10">
                        <input type="text" name="publish" class="form-control" placeholder="可以使用html语言">
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2 control-label">标记：</label>
                    <div class="col-sm-4">
                        <input type="text" name="sign" class="form-control" placeholder="可选，备用属性">
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2 control-label">片段：</label>
                    <div class="col-sm-10">
                        <textarea name="segment" class="form-control" id="" rows="5" placeholder="粘贴新闻前几行即可。用于列表展示"></textarea>
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2 control-label">详细：</label>
                    <div class="col-sm-10">
                        <textarea name="detail" class="form-control" id=""  rows="5" placeholder="新闻，包含html标签"></textarea>
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2 control-label">标签：</label>
                    <div class="col-sm-4">
                        <input type="text" name="tags" class="form-control" placeholder="一个空格分隔">
                    </div>
                </div>
                <div class="form-group">
                	<label for="" class="col-sm-2 control-label">推荐：</label>
                    <div class="col-sm-2">
                        <input type="radio" name="recommend" checked="" id="recommendFalse"><label for="recommendFalse">否</label>
                        <input type="radio" name="recommend" id="recommendTrue"><label for="recommendTrue">是</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2 control-label">相关链接：</label>
                    <div class="col-sm-8">
                        <input type="text"  class="form-control" name="relateUrls" placeholder="链接1，可选">
                        <input type="text"  class="form-control" name="relateUrls" placeholder="链接2，可选">
                        <input type="text"  class="form-control" name="relateUrls" placeholder="链接3，可选">
                    </div>
                </div>
                <div class="text-center sub margin-btm"><button type="submit" class="btn btn-info">提交</button></div>
            </form>
        </div>
    </div>
</div>

    <script src="${base}/thirdparty/My97DatePicker/WdatePicker.js"></script>
<script src="${base}/js_lib/jquery/jquery-2.1.4.min.js"></script>	
<script src="${base}/r/cms/jquery.js"></script>
<script src="${base}/mrhweb/js/commonJs/dict.js"></script>
<script src="${base}/mrhweb/js/commonJs/mrh.js"></script>
<script>
$(function(){
	/* var $form = $("#userForm");
	$form.find("input[name=realname]").attr("vld", "{required:true,username:true,minlength:[3]}");
	$form.find("input[name=password]").attr("vld", "{required:true,rangelength:[6,12]}");
	$form.find("input[name=mobile]").attr("vld", "{required:false,phone:true}");
	$form.find("input[name=username]").attr("vld", "{required:true,remote:'${base}/username_unique.jspx',messages:{remote:'用户名已存在'}}");
	$form.find("#surePwdId").attr("vld", "{required:true}").attr("equalto", "#passwordId");
	$form.validate(); */
	window._initDict(["newsType"]);
	initTypes();
});

initTypes = function(){
  		var $st = $("#news_type_id");
  		for(var key in window._dictEntitys["newsType"]){
  			$st.append("<option value="+key+">"+window._dictEntitys["newsType"][key]+"</option>");
  		}
    }

var addSuccess = function(data){
	if(data.result==true){
		parent.window._MRHLoader.slowDestroy(700,"添加成功");
		parent.window._queryOptions.options.page.pageNo = 1;
		parent.window._queryOptions.query();
		parent.$(parent._editDialog).dialog("close");
	}
};

function doSave(form){
	ajaxSubmitForm(form,addSuccess);
	event.preventDefault();
	return false;
}
</script>
</body>
</html>